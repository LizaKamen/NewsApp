@using Microsoft.AspNetCore.Localization
@using Microsoft.AspNetCore.Mvc.Localization
@inject IViewLocalizer Localizer
@{
    var requestCulture = Context.Features.Get<RequestCultureFeature>();
    var returnUrl = string.IsNullOrEmpty(Context.Request.Path) ? "~/" : $"~{Context.Request.Path.Value}{Context.Request.QueryString}";
}

<div class="dropdown">
    <button class="btn btn-secondary dropdown-toggle" type="button"
            data-bs-toggle="dropdown">@Localizer["Language"]
    </button>
    <ul class="dropdown-menu">
        <li>
            <a class="dropdown-item" href="@Url.Action("SetLanguage", "Home", new {culture = "en", returnUrl = returnUrl})">English</a>
        </li>
        <li>
            <a class="dropdown-item" href="@Url.Action("SetLanguage", "Home", new {culture = "ru", returnUrl = returnUrl})">Русский</a>
        </li>
        <li>
            <a class="dropdown-item" href="@Url.Action("SetLanguage", "Home", new {culture = "ja-jp", returnUrl = returnUrl})">日本語</a>
        </li>
    </ul>
</div>

